2021-08-08 14:54:01.601 -03:00 [INF] Application is starting
2021-08-08 14:54:02.148 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 14:54:02.523 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 14:54:02.523 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 14:54:02.523 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 14:54:02.523 -03:00 [INF] Hosting environment: Development
2021-08-08 14:54:02.523 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 14:54:05.199 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/ - -
2021-08-08 14:54:05.246 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/ - - - 301 0 - 51.6618ms
2021-08-08 14:54:05.259 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/index.html - -
2021-08-08 14:54:05.346 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/index.html - - - 200 - text/html;charset=utf-8 87.5352ms
2021-08-08 14:54:05.404 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger-ui.css - -
2021-08-08 14:54:05.421 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2021-08-08 14:54:05.422 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger-ui.css - - - 200 143410 text/css 18.4804ms
2021-08-08 14:54:05.523 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/favicon-16x16.png - -
2021-08-08 14:54:05.524 -03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2021-08-08 14:54:05.525 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/favicon-16x16.png - - - 200 665 image/png 2.3138ms
2021-08-08 14:54:05.598 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-08-08 14:54:05.718 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 120.8380ms
2021-08-08 14:55:22.755 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 165
2021-08-08 14:55:22.763 -03:00 [INF] CORS policy execution successful.
2021-08-08 14:55:22.812 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:55:22.873 -03:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelsApi.Models.UserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 14:55:22.944 -03:00 [WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
2021-08-08 14:55:23.241 -03:00 [INF] Registration attempt for user@example.com
2021-08-08 14:55:23.260 -03:00 [WRN] User password validation failed: PasswordRequiresNonAlphanumeric.
2021-08-08 14:55:23.262 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.SerializableError'.
2021-08-08 14:55:23.295 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Register (HotelsApi) in 417.7513ms
2021-08-08 14:55:23.296 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:55:23.297 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 165 - 400 100 application/json;+charset=utf-8 542.8905ms
2021-08-08 14:56:48.837 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 166
2021-08-08 14:56:48.838 -03:00 [INF] CORS policy execution successful.
2021-08-08 14:56:48.841 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:56:48.842 -03:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelsApi.Models.UserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 14:56:48.844 -03:00 [INF] Registration attempt for user@example.com
2021-08-08 14:56:49.575 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 14:56:50.246 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 14:56:50.328 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2021-08-08 14:56:50.332 -03:00 [WRN] User validation failed: DuplicateUserName;DuplicateEmail.
2021-08-08 14:56:50.335 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.SerializableError'.
2021-08-08 14:56:50.336 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Register (HotelsApi) in 1494.1738ms
2021-08-08 14:56:50.337 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:56:50.341 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 166 - 400 135 application/json;+charset=utf-8 1504.4508ms
2021-08-08 14:57:05.280 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 166
2021-08-08 14:57:05.281 -03:00 [INF] CORS policy execution successful.
2021-08-08 14:57:05.282 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:57:05.282 -03:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelsApi.Models.UserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 14:57:05.295 -03:00 [INF] Registration attempt for user1@example.com
2021-08-08 14:57:05.295 -03:00 [WRN] User password validation failed: PasswordRequiresNonAlphanumeric.
2021-08-08 14:57:05.296 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.SerializableError'.
2021-08-08 14:57:05.296 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Register (HotelsApi) in 14.2584ms
2021-08-08 14:57:05.297 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:57:05.297 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 166 - 400 100 application/json;+charset=utf-8 16.6978ms
2021-08-08 14:57:11.981 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 167
2021-08-08 14:57:11.981 -03:00 [INF] CORS policy execution successful.
2021-08-08 14:57:11.981 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:57:11.982 -03:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(HotelsApi.Models.UserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 14:57:11.982 -03:00 [INF] Registration attempt for user1@example.com
2021-08-08 14:57:12.018 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 14:57:12.021 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 14:57:12.023 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2021-08-08 14:57:12.126 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Boolean), @p14='?', @p15='?' (DbType = Boolean), @p16='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUsers" ("Id", "AccessFailedCount", "ConcurrencyStamp", "Email", "EmailConfirmed", "FirstName", "LastName", "LockoutEnabled", "LockoutEnd", "NormalizedEmail", "NormalizedUserName", "PasswordHash", "PhoneNumber", "PhoneNumberConfirmed", "SecurityStamp", "TwoFactorEnabled", "UserName")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2021-08-08 14:57:12.196 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2021-08-08 14:57:12.227 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."UserId", a."RoleId"
FROM "AspNetUserRoles" AS a
WHERE (a."UserId" = @__p_0) AND (a."RoleId" = @__p_1)
LIMIT 1
2021-08-08 14:57:12.236 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2021-08-08 14:57:12.264 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 14:57:12.266 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedEmail" = @__normalizedEmail_0
LIMIT 2
2021-08-08 14:57:12.306 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?', @p1='?', @p18='?', @p2='?' (DbType = Int32), @p3='?', @p19='?', @p4='?', @p5='?' (DbType = Boolean), @p6='?', @p7='?', @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTimeOffset), @p10='?', @p11='?', @p12='?', @p13='?', @p14='?' (DbType = Boolean), @p15='?', @p16='?' (DbType = Boolean), @p17='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "AspNetUserRoles" ("RoleId", "UserId")
VALUES (@p0, @p1);
UPDATE "AspNetUsers" SET "AccessFailedCount" = @p2, "ConcurrencyStamp" = @p3, "Email" = @p4, "EmailConfirmed" = @p5, "FirstName" = @p6, "LastName" = @p7, "LockoutEnabled" = @p8, "LockoutEnd" = @p9, "NormalizedEmail" = @p10, "NormalizedUserName" = @p11, "PasswordHash" = @p12, "PhoneNumber" = @p13, "PhoneNumberConfirmed" = @p14, "SecurityStamp" = @p15, "TwoFactorEnabled" = @p16, "UserName" = @p17
WHERE "Id" = @p18 AND "ConcurrencyStamp" = @p19;
2021-08-08 14:57:12.311 -03:00 [INF] Executing AcceptedResult, writing value of type 'null'.
2021-08-08 14:57:12.311 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Register (HotelsApi) in 329.6349ms
2021-08-08 14:57:12.312 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Register (HotelsApi)'
2021-08-08 14:57:12.312 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/register application/json-patch+json 167 - 202 0 - 331.3547ms
2021-08-08 15:45:45.262 -03:00 [INF] Application is shutting down...
2021-08-08 17:02:39.396 -03:00 [INF] Application is starting
2021-08-08 17:02:39.654 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 17:02:39.914 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 17:02:39.915 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 17:02:39.915 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 17:02:39.915 -03:00 [INF] Hosting environment: Development
2021-08-08 17:02:39.915 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 17:02:44.155 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/index.html - -
2021-08-08 17:02:44.239 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/index.html - - - 200 - text/html;charset=utf-8 86.2723ms
2021-08-08 17:02:44.381 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/favicon-16x16.png - -
2021-08-08 17:02:44.397 -03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2021-08-08 17:02:44.398 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/favicon-16x16.png - - - 0 665 image/png 16.7460ms
2021-08-08 17:02:44.413 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-08-08 17:02:44.504 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 90.4513ms
2021-08-08 17:42:21.615 -03:00 [INF] Application is shutting down...
2021-08-08 17:42:25.929 -03:00 [INF] Application is starting
2021-08-08 17:42:26.214 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 17:42:26.470 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 17:42:26.470 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 17:42:26.470 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 17:42:26.470 -03:00 [INF] Hosting environment: Development
2021-08-08 17:42:26.471 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 17:42:31.986 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/index.html - -
2021-08-08 17:42:32.089 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/index.html - - - 200 - text/html;charset=utf-8 109.1944ms
2021-08-08 17:42:32.155 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger-ui-bundle.js - -
2021-08-08 17:42:32.155 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger-ui-standalone-preset.js - -
2021-08-08 17:42:32.161 -03:00 [INF] The file /swagger-ui-bundle.js was not modified
2021-08-08 17:42:32.161 -03:00 [INF] The file /swagger-ui-standalone-preset.js was not modified
2021-08-08 17:42:32.162 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger-ui-bundle.js - - - 304 - application/javascript 6.7478ms
2021-08-08 17:42:32.162 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger-ui-standalone-preset.js - - - 304 - application/javascript 6.7245ms
2021-08-08 17:42:32.242 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/favicon-16x16.png - -
2021-08-08 17:42:32.254 -03:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2021-08-08 17:42:32.254 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/favicon-16x16.png - - - 0 665 image/png 11.8179ms
2021-08-08 17:42:32.307 -03:00 [INF] Request starting HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - -
2021-08-08 17:42:32.434 -03:00 [INF] Request finished HTTP/2 GET https://localhost:5001/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 126.6926ms
2021-08-08 17:43:04.229 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62
2021-08-08 17:43:04.235 -03:00 [INF] CORS policy execution successful.
2021-08-08 17:43:04.264 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:43:04.296 -03:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelsApi.Models.LoginUserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 17:43:04.340 -03:00 [WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
2021-08-08 17:43:04.609 -03:00 [INF] Login attempt for user1@example.com
2021-08-08 17:43:05.303 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 17:43:05.940 -03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 17:43:06.113 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
2021-08-08 17:43:06.192 -03:00 [ERR] Something Went Wrong in the Login
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'System.String' requires a key size of at least 'System.Int32' bits. Key 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', is of size: 'System.Int32'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at HotelsApi.Services.AuthManager.CreateToken() in /home/vinicius/Documents/Projects/HotelsApi/Services/AuthManager.cs:line 61
   at HotelsApi.Controllers.AccountController.Login(LoginUserDTO userDTO) in /home/vinicius/Documents/Projects/HotelsApi/Controllers/AccountController.cs:line 88
2021-08-08 17:43:06.207 -03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-08-08 17:43:06.249 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Login (HotelsApi) in 1948.2605ms
2021-08-08 17:43:06.249 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:43:06.254 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62 - 500 245 application/problem+json;+charset=utf-8 2025.3833ms
2021-08-08 17:43:28.746 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 61
2021-08-08 17:43:28.747 -03:00 [INF] CORS policy execution successful.
2021-08-08 17:43:28.749 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:43:28.749 -03:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelsApi.Models.LoginUserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 17:43:28.751 -03:00 [INF] Login attempt for user1@example.com
2021-08-08 17:43:28.774 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 17:43:28.777 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 17:43:28.788 -03:00 [WRN] Invalid password for user.
2021-08-08 17:43:28.789 -03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-08-08 17:43:28.789 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Login (HotelsApi) in 40.0356ms
2021-08-08 17:43:28.790 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:43:28.790 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 61 - 401 162 application/problem+json;+charset=utf-8 44.0825ms
2021-08-08 17:43:45.057 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62
2021-08-08 17:43:45.058 -03:00 [INF] CORS policy execution successful.
2021-08-08 17:43:45.058 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:43:45.058 -03:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelsApi.Models.LoginUserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 17:43:45.074 -03:00 [INF] Login attempt for user1@example.com
2021-08-08 17:43:45.089 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 17:43:45.092 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 17:43:45.114 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
2021-08-08 17:43:45.116 -03:00 [ERR] Something Went Wrong in the Login
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'System.String' requires a key size of at least 'System.Int32' bits. Key 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', is of size: 'System.Int32'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at HotelsApi.Services.AuthManager.CreateToken() in /home/vinicius/Documents/Projects/HotelsApi/Services/AuthManager.cs:line 61
   at HotelsApi.Controllers.AccountController.Login(LoginUserDTO userDTO) in /home/vinicius/Documents/Projects/HotelsApi/Controllers/AccountController.cs:line 88
2021-08-08 17:43:45.117 -03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-08-08 17:43:45.118 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Login (HotelsApi) in 58.6968ms
2021-08-08 17:43:45.118 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:43:45.118 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62 - 500 245 application/problem+json;+charset=utf-8 61.5991ms
2021-08-08 17:48:28.178 -03:00 [INF] Application is shutting down...
2021-08-08 17:48:32.705 -03:00 [INF] Application is starting
2021-08-08 17:48:32.968 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 17:48:33.231 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 17:48:33.231 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 17:48:33.231 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 17:48:33.231 -03:00 [INF] Hosting environment: Development
2021-08-08 17:48:33.231 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 17:48:38.876 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62
2021-08-08 17:48:38.911 -03:00 [INF] CORS policy execution successful.
2021-08-08 17:48:38.946 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:48:38.986 -03:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelsApi.Models.LoginUserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 17:48:39.034 -03:00 [WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
2021-08-08 17:48:39.310 -03:00 [INF] Login attempt for user1@example.com
2021-08-08 17:48:40.018 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 17:48:40.665 -03:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 17:48:40.844 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
2021-08-08 17:48:40.917 -03:00 [ERR] Something Went Wrong in the Login
System.ArgumentOutOfRangeException: IDX10653: The encryption algorithm 'System.String' requires a key size of at least 'System.Int32' bits. Key 'Microsoft.IdentityModel.Tokens.SymmetricSecurityKey', is of size: 'System.Int32'. (Parameter 'key')
   at Microsoft.IdentityModel.Tokens.SymmetricSignatureProvider..ctor(SecurityKey key, String algorithm, Boolean willCreateSignatures)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateSignatureProvider(SecurityKey key, String algorithm, Boolean willCreateSignatures, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm, Boolean cacheProvider)
   at Microsoft.IdentityModel.Tokens.CryptoProviderFactory.CreateForSigning(SecurityKey key, String algorithm)
   at Microsoft.IdentityModel.JsonWebTokens.JwtTokenUtilities.CreateEncodedSignature(String input, SigningCredentials signingCredentials)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.WriteToken(SecurityToken token)
   at HotelsApi.Services.AuthManager.CreateToken() in /home/vinicius/Documents/Projects/HotelsApi/Services/AuthManager.cs:line 61
   at HotelsApi.Controllers.AccountController.Login(LoginUserDTO userDTO) in /home/vinicius/Documents/Projects/HotelsApi/Controllers/AccountController.cs:line 88
2021-08-08 17:48:40.935 -03:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2021-08-08 17:48:40.979 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Login (HotelsApi) in 1988.555ms
2021-08-08 17:48:40.980 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:48:40.987 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62 - 500 245 application/problem+json;+charset=utf-8 2117.0924ms
2021-08-08 17:50:09.566 -03:00 [INF] Application is shutting down...
2021-08-08 17:50:13.781 -03:00 [INF] Application is starting
2021-08-08 17:50:14.053 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 17:50:14.316 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 17:50:14.317 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 17:50:14.317 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 17:50:14.317 -03:00 [INF] Hosting environment: Development
2021-08-08 17:50:14.317 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 17:50:17.761 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62
2021-08-08 17:50:17.801 -03:00 [INF] CORS policy execution successful.
2021-08-08 17:50:17.838 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:50:17.889 -03:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelsApi.Models.LoginUserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 17:50:17.938 -03:00 [WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
2021-08-08 17:50:18.214 -03:00 [INF] Login attempt for user1@example.com
2021-08-08 17:50:18.901 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 17:50:19.554 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 17:50:19.736 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
2021-08-08 17:50:19.832 -03:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-08 17:50:19.870 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Login (HotelsApi) in 1976.2569ms
2021-08-08 17:50:19.871 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 17:50:19.878 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62 - 202 343 application/json;+charset=utf-8 2123.0530ms
2021-08-08 17:58:02.970 -03:00 [INF] Application is shutting down...
2021-08-08 17:58:07.650 -03:00 [INF] Application is starting
2021-08-08 17:58:07.933 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 17:58:08.193 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 17:58:08.193 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 17:58:08.193 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 17:58:08.193 -03:00 [INF] Hosting environment: Development
2021-08-08 17:58:08.194 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 17:58:35.110 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/ - -
2021-08-08 17:58:35.160 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.HotelController.GetHotels (HotelsApi)'
2021-08-08 17:58:35.186 -03:00 [INF] Route matched with {action = "GetHotels", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotels() on controller HotelsApi.Controllers.HotelController (HotelsApi).
2021-08-08 17:58:35.232 -03:00 [WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
2021-08-08 17:58:36.077 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 17:58:36.645 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT h."Id", h."Address", h."CountryId", h."Name", h."Rating"
FROM "Hotels" AS h
2021-08-08 17:58:36.687 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HotelsApi.Models.HotelDTO, HotelsApi, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2021-08-08 17:58:36.779 -03:00 [INF] Executed action HotelsApi.Controllers.HotelController.GetHotels (HotelsApi) in 1588.607ms
2021-08-08 17:58:36.779 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.HotelController.GetHotels (HotelsApi)'
2021-08-08 17:58:36.785 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/ - - - 200 296 application/json;+charset=utf-8 1677.1881ms
2021-08-08 17:58:42.064 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-08-08 17:58:42.070 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-08 17:58:42.072 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-08-08 17:58:42.084 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 500 - text/plain 19.9810ms
2021-08-08 18:14:48.180 -03:00 [INF] Application is shutting down...
2021-08-08 18:14:57.551 -03:00 [INF] Application is starting
2021-08-08 18:14:57.828 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 18:14:58.087 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 18:14:58.087 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 18:14:58.087 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 18:14:58.087 -03:00 [INF] Hosting environment: Development
2021-08-08 18:14:58.087 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 18:15:06.761 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-08-08 18:15:06.811 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-08 18:15:06.814 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-08-08 18:15:06.831 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 500 - text/plain 72.9353ms
2021-08-08 18:29:28.346 -03:00 [INF] Application is shutting down...
2021-08-08 18:29:33.034 -03:00 [INF] Application is starting
2021-08-08 18:29:33.322 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 18:29:33.581 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 18:29:33.581 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 18:29:33.581 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 18:29:33.582 -03:00 [INF] Hosting environment: Development
2021-08-08 18:29:33.582 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 18:29:40.369 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-08-08 18:29:40.421 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-08 18:29:40.448 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-08-08 18:29:40.453 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 86.2284ms
2021-08-08 18:30:40.398 -03:00 [INF] Application is shutting down...
2021-08-08 18:30:44.384 -03:00 [INF] Application is starting
2021-08-08 18:30:44.654 -03:00 [INF] User profile is available. Using '/home/vinicius/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2021-08-08 18:30:44.915 -03:00 [INF] Now listening on: https://localhost:5001
2021-08-08 18:30:44.915 -03:00 [INF] Now listening on: http://localhost:5000
2021-08-08 18:30:44.915 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-08 18:30:44.915 -03:00 [INF] Hosting environment: Development
2021-08-08 18:30:44.915 -03:00 [INF] Content root path: /home/vinicius/Documents/Projects/HotelsApi
2021-08-08 18:30:56.567 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-08-08 18:30:56.643 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-08 18:30:56.646 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-08-08 18:30:56.650 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 86.4446ms
2021-08-08 18:34:01.353 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-08-08 18:34:01.450 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
2021-08-08 18:34:01.460 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: 'System.DateTime', Current time: 'System.DateTime'.
2021-08-08 18:34:01.461 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-08 18:34:01.463 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-08-08 18:34:01.464 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 401 0 - 110.0715ms
2021-08-08 18:35:09.229 -03:00 [INF] Request starting HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62
2021-08-08 18:35:09.232 -03:00 [INF] CORS policy execution successful.
2021-08-08 18:35:09.234 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 18:35:09.280 -03:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(HotelsApi.Models.LoginUserDTO) on controller HotelsApi.Controllers.AccountController (HotelsApi).
2021-08-08 18:35:09.329 -03:00 [WRN] 'AddEntityFramework*' was called on the service provider, but 'UseInternalServiceProvider' wasn't called in the DbContext options configuration. Consider removing the 'AddEntityFramework*' call, as in most cases it's not needed and may cause conflicts with other products and services registered in the same service provider.
2021-08-08 18:35:09.598 -03:00 [INF] Login attempt for user1@example.com
2021-08-08 18:35:10.284 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 18:35:10.930 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."FirstName", a."LastName", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2021-08-08 18:35:11.107 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a0."Name"
FROM "AspNetUserRoles" AS a
INNER JOIN "AspNetRoles" AS a0 ON a."RoleId" = a0."Id"
WHERE a."UserId" = @__userId_0
2021-08-08 18:35:11.173 -03:00 [INF] Executing AcceptedResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-08 18:35:11.220 -03:00 [INF] Executed action HotelsApi.Controllers.AccountController.Login (HotelsApi) in 1935.2969ms
2021-08-08 18:35:11.220 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.AccountController.Login (HotelsApi)'
2021-08-08 18:35:11.227 -03:00 [INF] Request finished HTTP/2 POST https://localhost:5001/api/Account/login application/json-patch+json 62 - 202 343 application/json;+charset=utf-8 1998.0825ms
2021-08-08 18:35:51.846 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - -
2021-08-08 18:35:51.856 -03:00 [INF] Successfully validated the token.
2021-08-08 18:35:51.857 -03:00 [INF] Authorization was successful.
2021-08-08 18:35:51.858 -03:00 [INF] Executing endpoint 'HotelsApi.Controllers.HotelController.GetHotel (HotelsApi)'
2021-08-08 18:35:51.861 -03:00 [INF] Route matched with {action = "GetHotel", controller = "Hotel"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetHotel(Int32) on controller HotelsApi.Controllers.HotelController (HotelsApi).
2021-08-08 18:35:51.885 -03:00 [INF] Entity Framework Core 5.0.8 initialized 'DatabaseContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: None
2021-08-08 18:35:51.920 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT h."Id", h."Address", h."CountryId", h."Name", h."Rating", c."Id", c."Name", c."Shortname"
FROM "Hotels" AS h
INNER JOIN "Countries" AS c ON h."CountryId" = c."Id"
WHERE h."Id" = @__id_0
LIMIT 1
2021-08-08 18:35:51.944 -03:00 [INF] Executing OkObjectResult, writing value of type 'HotelsApi.Models.HotelDTO'.
2021-08-08 18:35:51.957 -03:00 [INF] Executed action HotelsApi.Controllers.HotelController.GetHotel (HotelsApi) in 95.7634ms
2021-08-08 18:35:51.957 -03:00 [INF] Executed endpoint 'HotelsApi.Controllers.HotelController.GetHotel (HotelsApi)'
2021-08-08 18:35:51.958 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:5001/api/Hotel/1 - - - 200 151 application/json;+charset=utf-8 112.3375ms
